<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>London Lions – Admin Requests Queue</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f4f6f8;color:#111827;}
    header{background:#111827;color:#fff;padding:16px 24px;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
    header .left{display:flex;align-items:center;gap:12px;min-width:240px;}
    header img{height:44px;width:auto;display:block;}
    header .title{font-size:20px;font-weight:900;line-height:1.1;}
    header .right{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end;}
    .btn{border:0;border-radius:10px;padding:10px 14px;font-weight:900;cursor:pointer;white-space:nowrap;}
    .btn-nav{background:#e5e7eb;color:#111827;}
    .btn-logout{background:#ef4444;color:#fff;}
    .btn-primary{background:#111827;color:#fff;}
    .btn-secondary{background:#e5e7eb;color:#111827;}
    .wrap{max-width:1200px;margin:18px auto;padding:0 18px 30px;}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:14px;box-shadow:0 8px 20px rgba(0,0,0,0.06);overflow:hidden;margin-bottom:16px;}
    .card .card-h{padding:14px 16px;font-weight:900;border-bottom:1px solid #eef2f7;display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
    .muted{color:#6b7280;font-weight:800;font-size:13px;}
    .card .card-b{padding:16px;}
    .toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between;}
    .left-tools{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
    input,select,textarea{padding:10px 12px;border-radius:10px;border:1px solid #d1d5db;background:#fff;font-weight:800;font-size:14px;}
    table{width:100%;border-collapse:separate;border-spacing:0;overflow:hidden;border:1px solid #e5e7eb;border-radius:14px;background:#fff;}
    thead th{text-align:left;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#6b7280;font-weight:900;padding:12px 12px;background:#f9fafb;border-bottom:1px solid #eef2f7;white-space:nowrap;}
    tbody td{padding:12px 12px;border-bottom:1px solid #eef2f7;vertical-align:top;font-weight:800;color:#111827;}
    tbody tr:last-child td{border-bottom:0;}
    .pill{display:inline-block;padding:4px 10px;border-radius:999px;font-size:12px;font-weight:900;border:1px solid transparent;white-space:nowrap;}
    .pill.pending{background:#fff7ed;color:#9a3412;border-color:#fed7aa;}
    .pill.approved{background:#ecfdf5;color:#065f46;border-color:#a7f3d0;}
    .pill.denied{background:#fef2f2;color:#7f1d1d;border-color:#fecaca;}
    .pill.other{background:#f3f4f6;color:#111827;border-color:#e5e7eb;}
    .actions{display:flex;gap:8px;flex-wrap:wrap;}
    .btn-small{padding:8px 10px;border-radius:10px;font-weight:900;}
    .desc{max-width:520px;white-space:normal;color:#374151;font-weight:800;}
    .row-title{font-weight:1000;}
    .msg{margin-top:10px;font-weight:900;color:#6b7280;}
    .drawer{position:fixed;top:0;right:0;height:100vh;width:min(520px, 100%);background:#fff;border-left:1px solid #e5e7eb;box-shadow:-12px 0 40px rgba(0,0,0,.12);transform:translateX(110%);transition:transform .18s ease;z-index:999;}
    .drawer.open{transform:translateX(0);}
    .drawer-h{background:#111827;color:#fff;padding:14px 14px;font-weight:1000;display:flex;justify-content:space-between;align-items:center;gap:10px;}
    .drawer-b{padding:14px;}
    textarea{width:100%;min-height:110px;resize:vertical;}
    .kv{display:grid;grid-template-columns:120px 1fr;gap:8px 12px;font-weight:900;}
    .kv div:nth-child(odd){color:#6b7280;}
    .divider{height:1px;background:#eef2f7;margin:12px 0;}
  </style>
</head>

<body>
<header>
  <div class="left">
    <img src="/static/images/lions_emblem.png" alt="London Lions Logo" />
    <div class="title">London Lions – Admin Requests Queue</div>
  </div>
  <div class="right">
    <button class="btn btn-nav" id="dashBtn" type="button">Dashboard</button>
    <button class="btn btn-nav" id="toolsBtn" type="button">Admin Tools</button>
    <button class="btn btn-logout" id="logoutBtn" type="button">Logout</button>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <div class="card-h">
      <div>Requests Queue</div>
      <div class="muted" id="countHint">—</div>
    </div>

    <div class="card-b">
      <div class="toolbar">
        <div class="left-tools">
          <input id="q" placeholder="Search title / description" />
          <select id="status">
            <option value="">All statuses</option>
            <option value="PENDING">PENDING</option>
            <option value="APPROVED">APPROVED</option>
            <option value="DENIED">DENIED</option>
            <option value="IN_PROGRESS">IN_PROGRESS</option>
            <option value="CLOSED">CLOSED</option>
          </select>
          <select id="assigned">
            <option value="">All</option>
            <option value="assigned">Assigned</option>
            <option value="unassigned">Unassigned</option>
          </select>
          <button class="btn btn-primary" id="refreshBtn" type="button">Refresh</button>
        </div>
      </div>

      <div style="margin-top:14px; overflow:auto;">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Status</th>
              <th>Title</th>
              <th>Description</th>
              <th>Submitted</th>
              <th>Assigned</th>
              <th style="min-width:260px;">Actions</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>

      <div class="msg" id="msg"></div>
    </div>
  </div>
</div>

<!-- Right drawer -->
<div class="drawer" id="drawer">
  <div class="drawer-h">
    <div id="drawerTitle">Request</div>
    <button class="btn btn-secondary btn-small" id="closeDrawerBtn" type="button">Close</button>
  </div>
  <div class="drawer-b">
    <div class="kv">
      <div>ID</div><div id="d_id">—</div>
      <div>Status</div><div id="d_status">—</div>
      <div>Submitted</div><div id="d_submitted">—</div>
      <div>Submitter</div><div id="d_submitter">—</div>
      <div>Assigned</div><div id="d_assigned">—</div>
    </div>

    <div class="divider"></div>

    <label for="d_assign">Assign to member ID (blank = unassign)</label>
    <input id="d_assign" placeholder="e.g. 3" />
    <button class="btn btn-secondary" id="assignBtn" type="button" style="margin-top:10px;">Save Assignment</button>

    <div class="divider"></div>

    <label for="d_note">Admin note</label>
    <textarea id="d_note" placeholder="Add a note for internal tracking…"></textarea>
    <button class="btn btn-secondary" id="noteBtn" type="button" style="margin-top:10px;">Save Note</button>

    <div class="divider"></div>

    <div class="actions">
      <button class="btn btn-primary" id="approveBtn" type="button">Approve</button>
      <button class="btn btn-secondary" id="denyBtn" type="button">Deny</button>
    </div>

    <div class="msg" id="drawerMsg"></div>
  </div>
</div>

<script type="module" src="/static/js/admin_requests.js"></script>
</body>
</html>
